{% extends 'expert-base.html' %}

{% block title %}Expert Dashboard{% endblock %}

{% block content %}
<h1 class="text-3xl font-semibold text-center mt-8 mb-6">Expert Dashboard</h1>

<div class="flex gap-8 mx-4 mt-8">
    <!-- Bookings Card -->
    <div class="flex-1 bg-white shadow-lg rounded-lg p-6">
        <h2 class="text-xl font-semibold mb-4">Your Bookings</h2>
        {% if bookings %}
        <table class="min-w-full table-auto">
            <thead class="bg-gray-100">
                <tr>
                    <th class="px-4 py-2 text-left">Client</th>
                    <th class="px-4 py-2 text-left">Session Date & Time</th>
                    <th class="px-4 py-2 text-left">Status</th>
                </tr>
            </thead>
            <tbody>
                {% for booking in bookings %}
                <tr class="border-b">
                    <td class="px-4 py-2">{{ booking.user.name }}</td>  <!-- Accessing user's name -->
                    <td class="px-4 py-2">{{ booking.session_datetime.strftime('%Y-%m-%d %H:%M') }}</td>
                    <td class="px-4 py-2">{{ booking.status or "Pending" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="text-gray-600">No bookings yet.</p>
        {% endif %}
    </div>

    <!-- Messages Card -->
    <div class="flex-1 bg-white shadow-lg rounded-lg p-6">
        <h2 class="text-xl font-semibold mb-4">Your Messages</h2>
        {% if messages %}
        <ul class="space-y-4">
            {% for message in messages %}
            <li class="border-b pb-4">
                <p class="font-semibold">{{ message.user.name }}:</p>
                <p class="text-gray-600">{{ message.content }}</p>
                <p class="text-sm text-gray-500">{{ message.timestamp.strftime('%Y-%m-%d %H:%M') }}</p>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p class="text-gray-600">No messages yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
